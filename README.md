# ü§ñ RAG –¥–ª—è –Ø–Ω–¥–µ–∫—Å ML Handbook

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è **Retrieval-Augmented Generation (RAG)** —Å–∏—Å—Ç–µ–º–∞ —Å –∞–≥–µ–Ω—Ç–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ [–Ø–Ω–¥–µ–∫—Å ML Handbook](https://education.yandex.ru/handbook/ml).

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞](#-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞](#-–æ—Ü–µ–Ω–∫–∞-–∫–∞—á–µ—Å—Ç–≤–∞)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç —Å **–∞–≥–µ–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π**, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ –∏ REST API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ReAct –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –≤—ã–∑–æ–≤–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**: 69 —Å—Ç–∞—Ç–µ–π –∏–∑ —É—á–µ–±–Ω–∏–∫–∞ –Ø–Ω–¥–µ–∫—Å–∞ –ø–æ ML, —Ä–∞–∑–±–∏—Ç—ã—Ö –Ω–∞ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ                          ‚îÇ
                ‚ñº                          ‚ñº
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ  Telegram Bot    ‚îÇ       ‚îÇ   REST API       ‚îÇ
     ‚îÇ   (bot.py)       ‚îÇ       ‚îÇ   (api.py)       ‚îÇ
     ‚îÇ                  ‚îÇ       ‚îÇ                  ‚îÇ
     ‚îÇ  ‚Ä¢ /start        ‚îÇ       ‚îÇ  GET  /          ‚îÇ
     ‚îÇ  ‚Ä¢ /help         ‚îÇ       ‚îÇ  GET  /health    ‚îÇ
     ‚îÇ  ‚Ä¢ —Ç–µ–∫—Å—Ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ       ‚îÇ  POST /query     ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                          ‚îÇ
              ‚îÇ    HTTP Request          ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   AgenticRAGSystem     ‚îÇ
              ‚îÇ   (rag_system.py)      ‚îÇ
              ‚îÇ                        ‚îÇ
              ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
              ‚îÇ  ‚îÇ  ReAct Agent     ‚îÇ  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ System Prompt
              ‚îÇ  ‚îÇ  (LangGraph)     ‚îÇ  ‚îÇ     (prompts.yaml)
              ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
              ‚îÇ           ‚îÇ            ‚îÇ
              ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
              ‚îÇ  ‚îÇ  retrieve_tool   ‚îÇ  ‚îÇ
              ‚îÇ  ‚îÇ  (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π      ‚îÇ  ‚îÇ
              ‚îÇ  ‚îÇ   –ø–æ–∏—Å–∫)         ‚îÇ  ‚îÇ
              ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
              ‚îÇ           ‚îÇ            ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ              ‚îÇ              ‚îÇ
           ‚ñº              ‚ñº              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   LLM     ‚îÇ  ‚îÇ  Qdrant   ‚îÇ  ‚îÇ  Embeddings  ‚îÇ
    ‚îÇ  (GROQ)   ‚îÇ  ‚îÇ VectorDB  ‚îÇ  ‚îÇ  (HF BGE-M3) ‚îÇ
    ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ              ‚îÇ
    ‚îÇ ‚Ä¢ Qwen    ‚îÇ  ‚îÇ ‚Ä¢ 69      ‚îÇ  ‚îÇ ‚Ä¢ –†—É—Å—Å–∫–∏–π    ‚îÇ
    ‚îÇ   32B     ‚îÇ  ‚îÇ   —Å—Ç–∞—Ç–µ–π  ‚îÇ  ‚îÇ ‚Ä¢ –ö–æ–Ω—Ç–µ–∫—Å—Ç:  ‚îÇ
    ‚îÇ ‚Ä¢ Proxy   ‚îÇ  ‚îÇ ‚Ä¢ BAAI/   ‚îÇ  ‚îÇ   512 —Ç–æ–∫–µ–Ω–æ–≤‚îÇ
    ‚îÇ           ‚îÇ  ‚îÇ   bge-m3  ‚îÇ  ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚ñ≤
                          ‚îÇ
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ  Data Loading  ‚îÇ
                  ‚îÇ (html_loader)  ‚îÇ
                  ‚îÇ                ‚îÇ
                  ‚îÇ ‚Ä¢ Selenium     ‚îÇ
                  ‚îÇ ‚Ä¢ HTML Parser  ‚îÇ
                  ‚îÇ ‚Ä¢ Chunking     ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –í–æ–ø—Ä–æ—Å
         ‚Üì
2. Telegram Bot / API ‚Üí –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
         ‚Üì
3. AgenticRAGSystem ‚Üí –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
         ‚Üì
4. ReAct Agent ‚Üí –ê–Ω–∞–ª–∏–∑ –≤–æ–ø—Ä–æ—Å–∞
         ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ –ù—É–∂–µ–Ω –ø–æ–∏—Å–∫? ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                              ‚îÇ
   –î–ê                             –ù–ï–¢
    ‚îÇ                              ‚îÇ
    ‚ñº                              ‚ñº
5a. retrieve_tool()           5b. –ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç
    ‚îÇ                              ‚îÇ
    ‚ñº                              ‚îÇ
6. Qdrant Vector Search           ‚îÇ
   (Top-5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)             ‚îÇ
    ‚îÇ                              ‚îÇ
    ‚ñº                              ‚îÇ
7. –ö–æ–Ω—Ç–µ–∫—Å—Ç + –í–æ–ø—Ä–æ—Å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
         ‚Üì
8. LLM (GROQ) ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
         ‚Üì
9. –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
         ‚Üì
10. –û—Ç–≤–µ—Ç ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ **AgenticRAGSystem** (`src/rag_system.py`)
–Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã —Å –∞–≥–µ–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- **ReAct Agent**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ –≤—ã–∑–æ–≤–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–º–ø—Ç–∞
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞**: `retrieve_tool` –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ Qdrant
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤
- **Rate limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ API (70 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)

### 2Ô∏è‚É£ **REST API** (`src/api.py`)
FastAPI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤:
```
POST /query
{
  "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫?",
  "user_id": "user123"
}
```

### 3Ô∏è‚É£ **Telegram Bot** (`src/bot.py`)
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –±–æ—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
- –ö–æ–º–∞–Ω–¥—ã: `/start`, `/help`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–ª–∏–º–∏—Ç Telegram: 4096 —Å–∏–º–≤–æ–ª–æ–≤)

### 4Ô∏è‚É£ **Data Loading** (`data_loading/html_loader.py`)
–°–∫—Ä–∞–ø–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–µ–π:
- Selenium –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ JavaScript
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ URL ‚Üî —Ñ–∞–π–ª

### 5Ô∏è‚É£ **Evaluation** (`evaluation/evaluate_rag.py`)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ RAG —Å–∏—Å—Ç–µ–º—ã:
- **Chunk Relevance Score**: –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ (1-5)
- **Answer Quality Score**: –ö–∞—á–µ—Å—Ç–≤–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (1-5)
- **Overall Score**: –í–∑–≤–µ—à–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (40% chunks + 60% answer)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cd /home/dench/Downloads/rag_ml_handbook
python3 -m venv .env
```

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ `.env` (–Ω–µ `venv`)

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
source .env/bin/activate
pip install -r requirements.txt
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- ‚úÖ LangChain + LangGraph (–∞–≥–µ–Ω—Ç–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- ‚úÖ FastAPI + Uvicorn (REST API)
- ‚úÖ python-telegram-bot (Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- ‚úÖ Qdrant + HuggingFace (–≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.vars` —Å –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏:

```bash
nano .env.vars
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:

```env
# –¢–æ–∫–µ–Ω Hugging Face API
# –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞: https://huggingface.co/settings/tokens
HUGGINGFACEHUB_API_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxx

# –¢–æ–∫–µ–Ω GROQ API
# –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞: https://console.groq.com/keys
GROQ_API_TOKEN=gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
# –ü–æ–ª—É—á–∏—Ç–µ —É @BotFather –≤ Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrSTUvwxYZ

# URL –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ GROQ API)
PROXY_URL=http://username:password@196.19.177.20:8000

# –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ LLM –æ—Ç GROQ
MODEL_NAME=qwen/qwen3-32b

# –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
EMBEDDER_NAME=BAAI/bge-m3

# URL API —Å–µ—Ä–≤–µ—Ä–∞
API_URL=http://localhost:8000
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:
```bash
ls -la
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- ‚úÖ `.env/` - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ `.env.vars` - —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏ API
- ‚úÖ `qdrant_db/` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏
- ‚úÖ `start.sh` - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
./start.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Python –∏–∑ `.env/bin/python3`
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env.vars`
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç FastAPI —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8000)
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram –±–æ—Ç–∞

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python: /path/to/.env/bin/python3
–ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env.vars...

–ó–∞–ø—É—Å–∫ FastAPI —Å–µ—Ä–≤–µ—Ä–∞...
–ó–∞–ø—É—Å–∫ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞...

‚úÖ API –∑–∞–ø—É—â–µ–Ω —Å PID: 12345
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω —Å PID: 12346

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: kill 12345 12346
–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ API:**
```bash
curl http://localhost:8000/health
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram:**
–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rag_ml_handbook/
‚îú‚îÄ‚îÄ üìÇ data/                      # –°–∫–∞—á–∞–Ω–Ω—ã–µ HTML-—Ñ–∞–π–ª—ã —Å—Ç–∞—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ page_1.html
‚îÇ   ‚îú‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ page_69.html
‚îÇ   ‚îú‚îÄ‚îÄ url2filename.json         # –ú–∞–ø–ø–∏–Ω–≥ URL ‚Üí —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ filename2url.json         # –ú–∞–ø–ø–∏–Ω–≥ —Ñ–∞–π–ª ‚Üí URL
‚îÇ
‚îú‚îÄ‚îÄ üìÇ data_loading/              # –ú–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ html_loader.py            # Selenium —Å–∫—Ä–∞–ø–µ—Ä –¥–ª—è ML Handbook
‚îÇ
‚îú‚îÄ‚îÄ üìÇ evaluation/                # –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ RAG
‚îÇ   ‚îú‚îÄ‚îÄ evaluate_rag.py           # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —Å LLM-as-judge
‚îÇ   ‚îî‚îÄ‚îÄ evaluation_results.json   # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ü–µ–Ω–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ üìÇ notebooks/                 # Jupyter –Ω–æ—É—Ç–±—É–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ rag_project.ipynb         # –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ üìÇ src/                       # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ rag_system.py             # üß† –Ø–¥—Ä–æ RAG —Å –∞–≥–µ–Ω—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ api.py                    # üåê FastAPI REST API
‚îÇ   ‚îú‚îÄ‚îÄ bot.py                    # ü§ñ Telegram –±–æ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ prompts.yaml              # üìù System prompts –¥–ª—è –∞–≥–µ–Ω—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ üìÇ qdrant_db/                 # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Qdrant
‚îÇ   ‚îî‚îÄ‚îÄ ...                       # (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ üìÑ .env.vars                  # ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ Git)
‚îú‚îÄ‚îÄ üìÑ .gitignore                 # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ üìÑ start.sh                   # üöÄ –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ üìÑ requirements.txt           # üì¶ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üìÑ README.md                  # üìñ –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ üìÑ QUICK_START.md             # ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend & Core
- **LangChain** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è RAG –∏ –∞–≥–µ–Ω—Ç–æ–≤
- **LangGraph** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤ —Å checkpointing
- **FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

### ML & NLP
- **GROQ API** - –±—ã—Å—Ç—Ä—ã–π inference LLM (Qwen 32B)
- **HuggingFace Embeddings** - BAAI/bge-m3 –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- **Qdrant** - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### Bot & Communication
- **python-telegram-bot** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Telegram SDK
- **httpx** - HTTP –∫–ª–∏–µ–Ω—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∫—Å–∏

### Data Collection
- **Selenium** - –≤–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥ —Å JavaScript —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º
- **BeautifulSoup** - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- **Trafilatura** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

---

## üìä –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏ RAG (`evaluation/evaluate_rag.py`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **LLM-as-a-Judge** –ø–æ–¥—Ö–æ–¥:

### –ú–µ—Ç—Ä–∏–∫–∏

1. **Chunk Relevance Score** (1-5)
   - –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å—É

2. **Answer Quality Score** (1-5)
   - –û—Ü–µ–Ω–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

3. **Overall Score**
   - `Overall = 0.4 √ó Chunk Score + 0.6 √ó Answer Score`

### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```python
test_queries = [
    "–ß—Ç–æ —Ç–∞–∫–æ–µ L2 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è?",
    "–û–±—ä—è—Å–Ω–∏ –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ª–µ—Å–∞",
    "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º k-means?",
    "–ß—Ç–æ —Ç–∞–∫–æ–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫?",
    "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è?",
    "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è?",
]
```

### –ó–∞–ø—É—Å–∫ –æ—Ü–µ–Ω–∫–∏

```bash
cd evaluation
python evaluate_rag.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `evaluation_results.json` —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É.

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **ReAct Prompting**: –ê–≥–µ–Ω—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- **Smart Chunking**: –§—Ä–∞–≥–º–µ–Ω—Ç—ã —Ç–µ–∫—Å—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (512 —Ç–æ–∫–µ–Ω–æ–≤)
- **Rate Limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è TPM –ª–∏–º–∏—Ç–æ–≤ GROQ API

### –ü—Ä–æ–º–ø—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–í—Å–µ –ø—Ä–æ–º–ø—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `src/prompts.yaml`:
- `ReActPrompt` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- `DialogSummaryPrompt` - –ø—Ä–∞–≤–∏–ª–∞ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–∫—Å–∏ –¥–ª—è GROQ API

–ï—Å–ª–∏ GROQ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ –≤–∞—à–µ–º —Ä–µ–≥–∏–æ–Ω–µ, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTP –ø—Ä–æ–∫—Å–∏ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `.env.vars`).

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ø–Ω–¥–µ–∫—Å–∞.

---